<div class="container">
  <%= render "layouts/sound_menu" %>
  <div class="action-view-frame system-font quest-counter">
    <div class="fadein-content">
      <div class="d-flex quest-counter-bg">
        <div class="d-flex align-items-start flex-column slide-window quest-left-sidebar">
          <div class="quest-command mb-auto mx-auto mt-3">
            <button id="btn-new-quest" class="text-initialize">クエストをうける</button>
          </div>
          <div class="quest-command mx-auto mb-3">
            <button id="btn-quest-index" class="text-initialize">いままでのクエスト</button>
          </div>
          <div class="quest-command mx-auto pb-3">
            <%= link_to "ステータスにもどる", mypage_path, class: "text-initialize" %>
          </div>
        </div>

        <div class="quest-right-sidebar">
          <%= render 'new_quest_box', quest: @quest, user: @user %>
          <%= render 'quest_index_box', quests: @quests %>
          <%= render 'quest_show_box'%>
        </div>
      </div>

      <div class="quest-message-window system-window system-window-border d-flex align-items-center">
        <div class="d-flex p-1 align-items-center">
          <%= image_tag @shalica.have_first_animation.image, size: "80x80" %>
          <p id="quest-message-text" class="mb-0 ml-1"><%= @user.name %>さま！！こちらはギルドとなります！</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function(){

    $('.fadein-content').fadeIn("slow");

    $('.map_id').change(function() {
      $(".map-image").addClass("d-none");
      var imageId = "#map-image-" + $(this).val();
      $(imageId).removeClass("d-none");
    });

    $('.boss_id').change(function() {
      $(".boss-image").addClass("d-none");
      var imageId = "#boss-image-" + $(this).val();
      $(imageId).removeClass("d-none");
    });

    //new_quest_boxを表示
  　$('#btn-new-quest').click(function(){
  　　$('#new-quest-box').slideToggle("slow");
  　　$('.quest-show-box').slideUp();
  　　$('#quest-index-box').slideUp();
  　　$('#quest-message-text').text("クエストじょうほうをにゅうりょくしてください。")
  　});
    //new_quest_boxを非表示
  　$('#btn-quit-new-quest').click(function(){
　　  $('#new-quest-box').slideUp();
　　  $('#quest-message-text').text("")
　  });

　  //quest_index_boxを表示
　  $('#btn-quest-index').click(function(){
  　　$('#quest-index-box').slideToggle("slow");
  　　$('#new-quest-box').slideUp();
  　　$('.quest-show-box').slideUp();
  　　$('#quest-message-text').text("いままでうけたクエストを6つひょうじしています。")
  　});
    //quest_index_boxを非表示
  　$('#btn-quit-quest-index').click(function(){
　　  $('#quest-index-box').slideUp();
　　  $('#quest-message-text').text("")
　  });

　 // quest_show_boxを表示
　  $('.btn-quest-show').click(function(){
　    var show_button_id = $(this).attr("id");
　    var quest_id = show_button_id.substr(show_button_id.indexOf('-') + 1);
　    $('#quest-index-box').slideUp();
  　　$(`#quest-show-box-${quest_id}`).slideDown("slow");
  　　$('#quest-message-text').text("クエストのしょうさいになります。")

  　});
    //quest_show_boxを非表示
  　$('.btn-quit-quest-show').click(function(){
      var quit_button_id = $(this).attr("id");
      var quest_id = quit_button_id.substr(quit_button_id.indexOf('#') + 1);
　　  $(`#quest-show-box-${quest_id}`).slideUp();
　　  $('#quest-index-box').slideDown("slow");
　　  $('#quest-message-text').text("いままでうけたクエストを6つひょうじしています。")
　  });
  });
</script>